import{u as e,T as t,S as n,F as r,c as a,e as s,f as c,C as o}from"./iconUtil-54e88e60.js";import{r as l,ai as i,aj as d,R as u,B as f,aw as p,D as h,ax as y}from"./index-6e6a602c.js";const m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};var b=function(e,t){return l.createElement(i,d({},e,{ref:t,icon:m}))};const x=l.forwardRef(b);const g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};var v=function(e,t){return l.createElement(i,d({},e,{ref:t,icon:g}))};const E=l.forwardRef(v);const w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};var K=function(e,t){return l.createElement(i,d({},e,{ref:t,icon:w}))};const O=l.forwardRef(K);function j(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:r,indent:a,direction:s="ltr"}=e,c="ltr"===s?"left":"right",o={[c]:-n*a+4,["ltr"===s?"right":"left"]:0};switch(t){case-1:o.top=-3;break;case 1:o.bottom=-3;break;default:o.bottom=-3,o[c]=a+4}return u.createElement("div",{style:o,className:`${r}-drop-indicator`})}const N=u.forwardRef(((r,a)=>{const{getPrefixCls:s,direction:c,virtual:o,tree:l}=u.useContext(f),{prefixCls:i,className:d,showIcon:y=!1,showLine:m,switcherIcon:b,blockNode:x=!1,children:g,checkable:v=!1,selectable:E=!0,draggable:w,motion:K,style:N}=r,k=s("tree",i),S=s(),C=null!=K?K:Object.assign(Object.assign({},p(S)),{motionAppear:!1}),z=Object.assign(Object.assign({},r),{checkable:v,selectable:E,showIcon:y,motion:C,blockNode:x,showLine:Boolean(m),dropIndicatorRender:j}),[H,I]=e(k),L=u.useMemo((()=>{if(!w)return!1;let e={};switch(typeof w){case"function":e.nodeDraggable=w;break;case"object":e=Object.assign({},w)}return!1!==e.icon&&(e.icon=e.icon||u.createElement(O,null)),e}),[w]);return H(u.createElement(t,Object.assign({itemHeight:20,ref:a,virtual:o},z,{style:Object.assign(Object.assign({},null==l?void 0:l.style),N),prefixCls:k,className:h({[`${k}-icon-hide`]:!y,[`${k}-block-node`]:x,[`${k}-unselectable`]:!E,[`${k}-rtl`]:"rtl"===c},null==l?void 0:l.className,d,I),direction:c,checkable:v?u.createElement("span",{className:`${k}-checkbox-inner`}):v,selectable:E,switcherIcon:e=>u.createElement(n,{prefixCls:k,switcherIcon:b,treeNodeProps:e,showLine:m}),draggable:L}),g))}));var k;function S(e,t){e.forEach((function(e){const{key:n,children:r}=e;!1!==t(n,e)&&S(r||[],t)}))}function C(e){let{treeData:t,expandedKeys:n,startKey:r,endKey:a}=e;const s=[];let c=k.None;if(r&&r===a)return[r];if(!r||!a)return[];return S(t,(e=>{if(c===k.End)return!1;if(function(e){return e===r||e===a}(e)){if(s.push(e),c===k.None)c=k.Start;else if(c===k.Start)return c=k.End,!1}else c===k.Start&&s.push(e);return n.includes(e)})),s}function z(e,t){const n=y(t),r=[];return S(e,((e,t)=>{const a=n.indexOf(e);return-1!==a&&(r.push(t),n.splice(a,1)),!!n.length})),r}!function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"}(k||(k={}));var H=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function I(e){const{isLeaf:t,expanded:n}=e;return t?l.createElement(r,null):n?l.createElement(x,null):l.createElement(E,null)}function L(e){let{treeData:t,children:n}=e;return t||c(n)}const M=(e,t)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:c}=e,o=H(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const i=l.useRef(),d=l.useRef(),[u,p]=l.useState(o.selectedKeys||o.defaultSelectedKeys||[]),[m,b]=l.useState((()=>(()=>{const{keyEntities:e}=a(L(o));let t;return t=n?Object.keys(e):r?s(o.expandedKeys||c||[],e):o.expandedKeys||c,t})()));l.useEffect((()=>{"selectedKeys"in o&&p(o.selectedKeys)}),[o.selectedKeys]),l.useEffect((()=>{"expandedKeys"in o&&b(o.expandedKeys)}),[o.expandedKeys]);const{getPrefixCls:x,direction:g}=l.useContext(f),{prefixCls:v,className:E,showIcon:w=!0,expandAction:K="click"}=o,O=H(o,["prefixCls","className","showIcon","expandAction"]),j=x("tree",v),k=h(`${j}-directory`,{[`${j}-directory-rtl`]:"rtl"===g},E);return l.createElement(N,Object.assign({icon:I,ref:t,blockNode:!0},O,{showIcon:w,expandAction:K,prefixCls:j,className:k,expandedKeys:m,selectedKeys:u,onSelect:(e,t)=>{var n;const{multiple:r}=o,{node:a,nativeEvent:s}=t,{key:c=""}=a,l=L(o),u=Object.assign(Object.assign({},t),{selected:!0}),f=(null==s?void 0:s.ctrlKey)||(null==s?void 0:s.metaKey),h=null==s?void 0:s.shiftKey;let b;r&&f?(b=e,i.current=c,d.current=b,u.selectedNodes=z(l,b)):r&&h?(b=Array.from(new Set([].concat(y(d.current||[]),y(C({treeData:l,expandedKeys:m,startKey:c,endKey:i.current}))))),u.selectedNodes=z(l,b)):(b=[c],i.current=c,d.current=b,u.selectedNodes=z(l,b)),null===(n=o.onSelect)||void 0===n||n.call(o,b,u),"selectedKeys"in o||p(b)},onExpand:(e,t)=>{var n;return"expandedKeys"in o||b(e),null===(n=o.onExpand)||void 0===n?void 0:n.call(o,e,t)}}))},P=l.forwardRef(M),R=N;R.DirectoryTree=P,R.TreeNode=o;const $=R;export{$ as T};
